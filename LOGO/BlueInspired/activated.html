<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>iCxiFi | Activated</title>
<style>
@import url("https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Rajdhani:wght@500;600;700&display=swap");

:root {
  --panel: #17263a;
  --panel2: #131f31;
  --line: rgba(130, 165, 210, 0.22);
  --line-strong: rgba(107, 255, 190, 0.35);
  --text: #dbe8f7;
  --muted: #97abc4;
  --title: #ffb117;
  --ok: #6bffbe;
  --bad: #ff7272;
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  min-height: 100%;
}

body {
  font-family: "Rajdhani", "Segoe UI", sans-serif;
  color: var(--text);
  background:
    radial-gradient(1200px 700px at 85% 0%, rgba(23, 169, 255, 0.12), rgba(0, 0, 0, 0) 55%),
    radial-gradient(900px 600px at 10% 100%, rgba(19, 209, 150, 0.08), rgba(0, 0, 0, 0) 60%),
    linear-gradient(165deg, #091628 0%, #07111f 55%, #060d19 100%);
  display: grid;
  place-items: center;
  padding: clamp(12px, 2vw, 24px);
}

.page {
  width: clamp(320px, 92vw, 560px);
  margin: 0 auto;
}

.panel {
  border: 1px solid var(--line);
  border-radius: 18px;
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.03), rgba(0, 0, 0, 0.16)),
    linear-gradient(180deg, var(--panel) 0%, var(--panel2) 100%);
  box-shadow:
    0 30px 80px rgba(0, 0, 0, 0.6),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  padding: clamp(14px, 2.6vw, 22px);
  position: relative;
  overflow: hidden;
  text-align: center;
}

.panel::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(115deg, rgba(255, 177, 23, 0.07), rgba(23, 169, 255, 0.07) 52%, rgba(19, 209, 150, 0.05));
  opacity: 0.35;
  pointer-events: none;
}

.panel > * {
  position: relative;
  z-index: 1;
}

.brand {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  margin-bottom: 14px;
}

.brand-main {
  display: flex;
  align-items: center;
  gap: 10px;
}

.brand img {
  width: 112px;
  height: auto;
  opacity: 0.96;
}

.beta {
  border: 1px solid var(--line);
  border-radius: 999px;
  padding: 2px 10px;
  font-size: 14px;
  color: var(--muted);
}

.node-pill {
  border-radius: 10px;
  border: 1px solid rgba(107, 255, 190, 0.4);
  background: rgba(107, 255, 190, 0.12);
  color: var(--ok);
  padding: 6px 10px;
  font-weight: 700;
  letter-spacing: 0.2px;
}

h1 {
  margin: 0;
  font-family: "Orbitron", "Rajdhani", sans-serif;
  color: var(--title);
  font-size: clamp(24px, 4vw, 30px);
  letter-spacing: 0.5px;
}

.subtitle {
  margin: 8px 0 14px;
  color: var(--muted);
  font-size: 20px;
}

.status {
  border: 1px solid var(--line-strong);
  border-radius: 12px;
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.04), rgba(0, 0, 0, 0.22)),
    rgba(8, 20, 30, 0.75);
  padding: 12px;
  color: var(--ok);
  font-size: 20px;
  font-weight: 700;
}

.meta {
  margin-top: 10px;
  color: var(--muted);
  font-size: 18px;
}

.small-note {
  margin-top: 8px;
  color: var(--muted);
  font-size: 17px;
}

.error {
  color: var(--bad);
  border-color: rgba(255, 114, 114, 0.45);
}

@media (max-width: 480px) {
  .brand {
    flex-direction: column;
    justify-content: center;
  }
}
</style>
</head>
<body>
<main class="page">
  <section class="panel">
    <header class="brand">
      <div class="brand-main">
        <img src="/logo.svg" alt="iCxiFi" width="112" />
        <span class="beta">v1.0-beta</span>
      </div>
      <div class="node-pill">Activated</div>
    </header>

    <h1>Router Activated</h1>
    <p class="subtitle">This router is already linked to iCxiFi Cloud.</p>

    <div class="status" id="activationText">Status: Activated</div>
    <p class="meta" id="meta">Router ID: ...</p>
    <p class="meta" id="licenseMeta" style="display:none">License: <span id="licenseKey"></span></p>
    <p class="small-note">Bind page access is disabled for this router.</p>
    <a href="/portal.html" class="btn primary" style="display:inline-block;margin-top:16px;text-decoration:none;color:#1b1404;padding:12px 24px;border-radius:12px;font-weight:700;background:linear-gradient(180deg,#ffc249 0%,#f0a000 100%)">Continue to WiFi</a>
  </section>
</main>

<script>
const metaEl = document.getElementById("meta");
const activationTextEl = document.getElementById("activationText");

async function getJson(url, options = {}) {
  const response = await fetch(url, { cache: "no-store", ...options });
  const raw = await response.text();
  let data = {};

  if (raw) {
    try {
      data = JSON.parse(raw);
    } catch {
      throw new Error("Invalid API response.");
    }
  }

  if (!response.ok) {
    const apiError = typeof data.error === "string" ? data.error : "HTTP " + response.status;
    throw new Error(apiError);
  }

  return data;
}

(async function init() {
  try {
    const data = await getJson("/cgi-bin/icxifi/activation");
    metaEl.textContent = "Router ID: " + (data.routerId || "unknown");
    if (data.licenseKey) {
      document.getElementById("licenseMeta").style.display = "block";
      document.getElementById("licenseKey").textContent = data.licenseKey;
    }
    if (!data.activated) {
      activationTextEl.textContent = "Status: Not activated";
      activationTextEl.classList.add("error");
    }
  } catch (error) {
    activationTextEl.textContent = "Status: " + error.message;
    activationTextEl.classList.add("error");
  }
})();
</script>
</body>
</html>

